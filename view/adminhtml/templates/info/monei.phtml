<?php

/**
 * @author Monei Team
 * @copyright Copyright Â© Monei (https://monei.com)
 */

/**
 * @var $block \Monei\MoneiPayment\Block\Info\Monei
 */
$paymentTitle = $block->getPaymentTitle();
$paymentInfo = $block->getPaymentInfo();
?>
<?php if (is_array($paymentInfo)): ?>
    <?php $paymentMethodDisplay = $block->getFormattedPaymentMethodDisplay(); ?>

    <table class="data-table admin__table-secondary">
        <tbody>
            <?php if (isset($paymentInfo['id']) && !empty($paymentInfo['id'])): ?>
            <tr>
                <th><?= $escaper->escapeHtml(__('Payment ID')) ?></th>
                <td>
                    <a href="https://dashboard.monei.com/payments/<?= $escaper->escapeHtml($paymentInfo['id']) ?>" target="_blank">
                        <?= $escaper->escapeHtml($paymentInfo['id']) ?>
                    </a>
                </td>
            </tr>
            <?php endif; ?>
            <tr>
                <th><?= $escaper->escapeHtml(__('Payment Method')) ?></th>
                <td>
                    <?= $escaper->escapeHtml($paymentMethodDisplay) ?>
                </td>
            </tr>

            <?php if (isset($paymentInfo['tokenizationMethod']) && !empty($paymentInfo['tokenizationMethod'])):
                $walletValue = $block->formatWalletDisplay($paymentInfo['tokenizationMethod']);
                ?>
                <tr>
                    <th><?= $escaper->escapeHtml(__('Digital Wallet')) ?></th>
                    <td><?= $escaper->escapeHtml($walletValue) ?></td>
                </tr>
            <?php endif; ?>

            <?php if (isset($paymentInfo['cardholderName']) && !empty($paymentInfo['cardholderName'])): ?>
                <tr>
                    <th><?= $escaper->escapeHtml(__('Cardholder')) ?></th>
                    <td><?= $escaper->escapeHtml($paymentInfo['cardholderName']) ?></td>
                </tr>
            <?php endif; ?>

            <?php if (isset($paymentInfo['cardholderEmail']) && !empty($paymentInfo['cardholderEmail'])): ?>
                <tr>
                    <th><?= $escaper->escapeHtml(__('Cardholder Email')) ?></th>
                    <td><?= $escaper->escapeHtml($paymentInfo['cardholderEmail']) ?></td>
                </tr>
            <?php endif; ?>

            <?php if (isset($paymentInfo['phoneNumber']) && !empty($paymentInfo['phoneNumber'])): ?>
                <tr>
                    <th><?= $escaper->escapeHtml(__('Phone Number')) ?></th>
                    <td><?= $escaper->escapeHtml($block->formatPhoneNumber($paymentInfo['phoneNumber'])) ?></td>
                </tr>
            <?php endif; ?>

            <?php if (isset($paymentInfo['iban']) && !empty($paymentInfo['iban'])): ?>
                <tr>
                    <th><?= $escaper->escapeHtml(__('IBAN')) ?></th>
                    <td><?= $escaper->escapeHtml($paymentInfo['iban']) ?></td>
                </tr>
            <?php endif; ?>

            <?php if (isset($paymentInfo['accountName']) && !empty($paymentInfo['accountName'])): ?>
                <tr>
                    <th><?= $escaper->escapeHtml(__('Account Holder')) ?></th>
                    <td><?= $escaper->escapeHtml($paymentInfo['accountName']) ?></td>
                </tr>
            <?php endif; ?>

            <?php if (isset($paymentInfo['country']) && !empty($paymentInfo['country'])): ?>
                <tr>
                    <th><?= $escaper->escapeHtml(__('Country Code')) ?></th>
                    <td><?= $escaper->escapeHtml($paymentInfo['country']) ?></td>
                </tr>
            <?php endif; ?>

            <?php if (isset($paymentInfo['authorizationCode']) && !empty($paymentInfo['authorizationCode'])): ?>
                <tr>
                    <th><?= $escaper->escapeHtml(__('Authorization Code')) ?></th>
                    <td>
                        <?= $escaper->escapeHtml($paymentInfo['authorizationCode']) ?>
                    </td>
                </tr>
            <?php endif; ?>
        </tbody>
    </table>
<?php else: ?>
    <div class="message message-notice">
        <div><?= $escaper->escapeHtml(__('Payment details will be available after payment confirmation')) ?></div>
    </div>
<?php endif; ?>
